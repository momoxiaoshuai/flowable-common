import{r as g,o as G,h as H,a as J,b as u,c as V,d as k,e as l,w as a,f as s,g as r,F as y,i as U,t as K,l as $,j as T,k as w}from"./index-B-OkF-Vi.js";import{E as P,a as Q}from"./el-form-item-DkIAkhZe.js";import{E as W,a as X}from"./el-table-column-BMB4Txwf.js";import{E as Y,a as Z}from"./el-select-BMIGA4sq.js";import{E as ee}from"./el-input-kTMZ2gCf.js";import{E as le}from"./el-dialog-CIdYYP2D.js";import{_ as ae,e as oe,E as te,f as de}from"./_plugin-vue_export-helper--f4TL7q-.js";const re={class:"mb-4 btn"},ne={class:"stepItem"},se={class:"inline-item"},ue={class:"dialog-footer"},pe={__name:"flowList",setup(me){const O=g([]),I=async()=>{const{data:m}=await oe();O.value=m};G(()=>{I()});const B=H(),c=m=>{B.push({path:"./taskList",query:{type:m}})},t=J({orderName:"",orderType:"",remark:"",fields:[{fieldName:"",fieldCname:"",fieldType:"text",defaultValue:"",otherInfo:[{label:"",value:""}]}],assignees:[{assignee:"",assigneeOrder:"",canCancelOrder:"1"}]}),b=g(!1),h=()=>{t.fields=[{fieldName:"",fieldCname:"",fieldType:"text",defaultValue:"",otherInfo:[{label:"",value:""}]}],t.orderType="",t.orderName="",t.remark="",b.value=!0},x=()=>{t.assignees.push({assignee:"",assigneeOrder:"",canCancelOrder:"1"})},D=()=>{t.fields.push({fieldName:"",fieldCname:"",fieldType:"",defaultValue:"",otherInfo:[{label:"",value:""}]})},R=m=>{t.fields[m].otherInfo.push({label:"",value:""})},S=(m,e)=>{t.fields[m].otherInfo.splice(e,1)},j=async()=>{await de(t),I(),b.value=!1},N=g(!1),q=g([]),z=g("");return(m,e)=>{const i=te,E=W,A=X,F=le,f=ee,p=Q,_=Z,L=Y,M=P;return u(),V(y,null,[k("div",re,[l(i,{type:"primary",onClick:h},{default:a(()=>e[7]||(e[7]=[s("新增")])),_:1})]),l(A,{data:r(O),style:{width:"100%"},border:"",class:"table"},{default:a(()=>[l(E,{prop:"orderName",label:"流程名称",width:"200"}),l(E,{prop:"version",label:"版本号",width:"200"}),l(E,{fixed:"right",label:"操作","min-width":"120"},{default:a(({row:o})=>[l(i,{link:"",type:"primary",size:"small",onClick:n=>c(o.orderType)},{default:a(()=>e[8]||(e[8]=[s("流程列表")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(F,{modelValue:r(N),"onUpdate:modelValue":e[0]||(e[0]=o=>$(N)?N.value=o:null),title:r(z),width:"500"},{default:a(()=>[(u(!0),V(y,null,U(r(q),o=>(u(),V("div",ne,K(o),1))),256))]),_:1},8,["modelValue","title"]),l(F,{modelValue:r(b),"onUpdate:modelValue":e[6]||(e[6]=o=>$(b)?b.value=o:null),title:"新增流程"},{footer:a(()=>[k("span",ue,[l(i,{onClick:e[5]||(e[5]=o=>b.value=!1)},{default:a(()=>e[22]||(e[22]=[s("取 消")])),_:1}),l(i,{type:"primary",onClick:j},{default:a(()=>e[23]||(e[23]=[s("确 定")])),_:1})])]),default:a(()=>[l(M,{model:r(t),"label-width":"80px"},{default:a(()=>[l(p,{label:"流程名称",prop:"orderName"},{default:a(()=>[l(f,{modelValue:r(t).orderName,"onUpdate:modelValue":e[1]||(e[1]=o=>r(t).orderName=o),placeholder:"请输入流程名称"},null,8,["modelValue"])]),_:1}),l(p,{label:"流程key",prop:"orderType"},{default:a(()=>[l(f,{modelValue:r(t).orderType,"onUpdate:modelValue":e[2]||(e[2]=o=>r(t).orderType=o),placeholder:"请输入流程key"},null,8,["modelValue"])]),_:1}),l(p,{label:"描述",prop:"remark"},{default:a(()=>[l(f,{modelValue:r(t).remark,"onUpdate:modelValue":e[3]||(e[3]=o=>r(t).remark=o),placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),e[20]||(e[20]=k("h3",null,"流程绑定表单",-1)),(u(!0),V(y,null,U(r(t).fields,(o,n)=>(u(),V(y,{key:n},[k("div",se,[l(p,{class:"mb-4",label:"字段名",prop:"fields."+n+".fieldName",style:{width:"240px"}},{default:a(()=>[l(f,{modelValue:o.fieldName,"onUpdate:modelValue":d=>o.fieldName=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:"中文名",prop:"fields."+n+".fieldCname",style:{width:"240px"}},{default:a(()=>[l(f,{modelValue:o.fieldCname,"onUpdate:modelValue":d=>o.fieldCname=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:"表单类型",prop:"fields."+n+".fieldType",style:{width:"240px"}},{default:a(()=>[l(L,{modelValue:o.fieldType,"onUpdate:modelValue":d=>o.fieldType=d},{default:a(()=>[l(_,{label:"输入框",value:"text"},{default:a(()=>e[9]||(e[9]=[s("输入框")])),_:1}),l(_,{label:"选择框",value:"select"},{default:a(()=>e[10]||(e[10]=[s("选择框")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:" 默认值",prop:"fields."+n+".fieldName",style:{width:"240px","margin-right":"10px"}},{default:a(()=>[l(f,{modelValue:o.fieldName,"onUpdate:modelValue":d=>o.fieldName=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(i,{onClick:D,type:"primary"},{default:a(()=>e[11]||(e[11]=[s("添加")])),_:1}),r(t).fields.length>1?(u(),T(i,{key:0,onClick:d=>m.removeField("fields",n),type:"primary"},{default:a(()=>e[12]||(e[12]=[s("删除")])),_:2},1032,["onClick"])):w("",!0)]),o.fieldType==="select"?(u(),V(y,{key:0},[e[15]||(e[15]=k("h3",null,"流程绑定表单",-1)),(u(!0),V(y,null,U(o.otherInfo,(d,C)=>(u(),V("div",{class:"inline-item",label:"信息",key:C},[l(p,{label:"选项名称",prop:"otherInfo."+C+".otherInfo"},{default:a(()=>[l(f,{modelValue:d.label,"onUpdate:modelValue":v=>d.label=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:"选项值",prop:"otherInfo."+C+".otherInfo",style:{"margin-right":"10px"}},{default:a(()=>[l(f,{modelValue:d.value,"onUpdate:modelValue":v=>d.value=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(i,{onClick:v=>R(n),type:"primary"},{default:a(()=>e[13]||(e[13]=[s("添加选项")])),_:2},1032,["onClick"]),r(t).fields[n].otherInfo.length>1?(u(),T(i,{key:0,onClick:v=>S(n,C),type:"primary"},{default:a(()=>e[14]||(e[14]=[s("删除")])),_:2},1032,["onClick"])):w("",!0)]))),128))],64)):w("",!0)],64))),128)),e[21]||(e[21]=k("h3",null,"代理人",-1)),(u(!0),V(y,null,U(r(t).assignees,(o,n)=>(u(),V("div",{key:n,class:"inline-item"},[l(p,{class:"mb-4",label:"代理人",prop:"assignees."+n+".assignee",style:{width:"240px"}},{default:a(()=>[l(f,{modelValue:o.assignee,"onUpdate:modelValue":d=>o.assignee=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:"顺序",prop:"assignees."+n+".assigneeOrder",style:{width:"240px"}},{default:a(()=>[l(f,{modelValue:o.assigneeOrder,"onUpdate:modelValue":d=>o.assigneeOrder=d},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(p,{label:"取消工单",prop:"assignees."+n+".canCancelOrder",style:{width:"240px","margin-right":"10px"}},{default:a(()=>[l(L,{modelValue:o.canCancelOrder,"onUpdate:modelValue":d=>o.canCancelOrder=d},{default:a(()=>[l(_,{label:"不允许",value:"0"},{default:a(()=>e[16]||(e[16]=[s("不允许")])),_:1}),l(_,{label:"允许",value:"1"},{default:a(()=>e[17]||(e[17]=[s("允许")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),l(i,{onClick:x,type:"primary"},{default:a(()=>e[18]||(e[18]=[s("添加")])),_:1}),r(t).assignees.length>1?(u(),T(i,{key:0,onClick:e[4]||(e[4]=d=>m.removeField("assignees",m.fieldIndex)),type:"primary"},{default:a(()=>e[19]||(e[19]=[s("删除")])),_:1})):w("",!0)]))),128))]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}},ge=ae(pe,[["__scopeId","data-v-620e3e6b"]]);export{ge as default};
